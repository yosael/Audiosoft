<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.prime.com.tr/ui">
		<rich:panel style="padding:1px;">
				<f:facet name="header">#{app.general_step2_head}</f:facet>
				<s:div rendered="#{generalMedicalDAO.managed}">
				
					<h:outputText
						value="#{app.history_consecutive}: #{generalMedicalDAO.instance.consecutive}"
						styleClass="consecutive" />
				<!--		
						<rich:spacer width="30px;"></rich:spacer>
					
					  <a:commandButton
				        value="Expandir"
				        action="#{generalMedicalDAO.openToggles2(true)}"
				        style="font-size:10px;-webkit-border-radius: 15px;height: 22px;background-image: url(../../kubeImg/arrow_down16.png);
								background-position: 5px 4px;
								background-repeat: no-repeat;
								text-indent: 20px;"
				        ajaxSingle="true"
				        reRender="toggles21,toggles22,toggles23,toggles24"
				        />
				        <rich:spacer width="14px;"></rich:spacer>
				        <a:commandButton
				        value="Ocultar"
				        action="#{generalMedicalDAO.openToggles2(false)}"
				        style="font-size:10px;-webkit-border-radius: 15px;height: 22px;background-image: url(../../kubeImg/arrow_up16.png);
								background-position: 5px 4px;
								background-repeat: no-repeat;
								text-indent: 20px;"
				        ajaxSingle="true"
				        reRender="toggles21,toggles22,toggles23,toggles24"
				        />	 -->
						
				</s:div>
				
				<a:poll id="autoRefreshStep1" interval="50000" enabled="true" reRender="txtTiempoEvolucion" action="#{medicalAppointmentDAO.refreshCitaMedicaStep1()}"  />
				
					<rich:simpleTogglePanel switchType="ajax" eventsQueue="q1" style="font-size:14px;" label="#{app.general_step2_tab1}" id="toggles21" opened="#{generalMedicalDAO.toggle2}">
						<h:panelGrid columns="1" style="padding-left:50px;font-size:14px">
						
							
							<s:decorate template="/layout/kEditSpace.xhtml">
								<h:panelGrid columns="1" >
								
									<s:decorate template="/layout/kEditSpace.xhtml" rendered="#{wizardGeneralMedical.subsecuente and (wizardGeneralMedical.motivoConsultaAnterior!=null and wizardGeneralMedical.motivoConsultaAnterior!='') }" >
										<ui:define name="label">Motivo consulta anterior:</ui:define>	
										<h:inputTextarea
											value="#{wizardGeneralMedical.motivoConsultaAnterior}" style="width:780px;font-size:14px" id="txtMotivoConsultaAnterior" readonly="true" />	
									</s:decorate>
								
									<h:panelGrid columns="2" >
										<h:outputLabel value="Consulta por: " style="font-weight:bold" /><!-- #{app.general_step2_reason}: -->
										
										<a:commandButton  styleClass="addBtn" value=" " 
											onclick="#{rich:component('selMotiv')}.show();"
										 	ajaxSingle="true"
										 	reRender="_tableMotiv"
										 	action="#{motivoConsultaHome.load()}"
										 	style="width:30px"
										 	rendered="#{wizardGeneralMedical.mode != 'r'}"
										/>
									</h:panelGrid>
									
									<h:inputTextarea
										value="#{generalMedicalDAO.instance.consultationReason}"
										disabled="#{wizardGeneralMedical.mode == 'r'}" style="width:780px;font-size:14px" id="txtMotivoConsulta" >
											<a:support event="onchange" action="#{wizardGeneralMedical.generarResumen()}" reRender="txtResumenPaciente" ajaxSingle="true" ></a:support>
										</h:inputTextarea>
									
								</h:panelGrid>
							</s:decorate>	

									<!-- <rich:dataTable style="font-size:12px"  value="#{motivoConsultaHome.motivosConsultaPA}" var="mot" id="motivPa"  >
										<rich:column >
											<f:facet name="header">Motivo</f:facet>
											<h:outputText style="font-size:12px;" value="#{mot.motivo.descripcion}" />
										</rich:column>
										<rich:column rendered="#{wizardGeneralMedical.mode != 'r'}" >
											<f:facet name="header">#{msn.col_actions}</f:facet>
											<a:commandLink value="Quitar" reRender="motivPa"
												 ajaxSingle="true" eventsQueue="q1">
											</a:commandLink>
										</rich:column>
								</rich:dataTable>
								<a:commandButton  styleClass="addBtn" value="+" 
									onclick="#{rich:component('selMotiv')}.show();"
								 	ajaxSingle="true"
								 	reRender="_tableMotiv"
								 	action="#{motivoConsultaHome.load()}"
								/> -->
							
							
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_observation}:</ui:define>
								<h:inputTextarea
									value="#{generalMedicalDAO.instance.observation}" 
									 disabled="#{wizardGeneralMedical.mode == 'r'}"  id="txtTiempoEvolucion" style="width:780px;font-size:14px" >
									 <a:support event="onkeyup" action="#{wizardGeneralMedical.generarResumen()}" reRender="txtResumenPaciente" ajaxSingle="true" ></a:support>
								</h:inputTextarea>	
							</s:decorate>
							
							<!-- 
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">Motivos de consulta anteriores:</ui:define>
								<rich:dataTable rendered="#{not empty (motivoConsultaHome.motivosUltimaConsultaPA)}" style="font-size:12px"  value="#{motivoConsultaHome.motivosUltimaConsultaPA}" var="mot" id="motivPa"  >
											<rich:column >
												<f:facet name="header">Motivo</f:facet>
												<h:outputText style="font-size:12px;" value="#{mot.motivo.descripcion}" />
											</rich:column>
											<rich:column rendered="#{wizardGeneralMedical.mode != 'r'}" >
												<f:facet name="header">#{msn.col_actions}</f:facet>
												<a:commandLink value="Quitar" reRender="motivPa"
													 ajaxSingle="true" eventsQueue="q1">
												</a:commandLink>
											</rich:column>
									</rich:dataTable>
									
									<h:outputLabel value="No se encontraron registros anteriores..." rendered="#{empty (motivoConsultaHome.motivosUltimaConsultaPA)}" />
									
							</s:decorate>
							 -->
							
						</h:panelGrid>
					</rich:simpleTogglePanel>
					<rich:simpleTogglePanel switchType="ajax" eventsQueue="q1" label="#{app.general_step2_tab2}" id="toggles22" opened="false">
						<h:panelGrid columns="2" style="padding-left:50px;font-size:14px">
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_height}:</ui:define>
								<h:inputText value="#{generalMedicalDAO.instance.height}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" >
									<a:support event="onkeyup" action="#{wizardGeneralMedical.generarResumen()}" reRender="txtResumenPaciente" ajaxSingle="true" ></a:support>	
								</h:inputText>
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_weight}:</ui:define>
								<h:inputText value="#{generalMedicalDAO.instance.weight}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" >
									<a:support event="onkeyup" action="#{wizardGeneralMedical.generarResumen()}" reRender="txtResumenPaciente" ajaxSingle="true" ></a:support>
								</h:inputText>
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_temperature}:</ui:define>
								<h:inputText value="#{generalMedicalDAO.instance.temperature}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_heart_rate}:</ui:define>
								<h:inputText value="#{generalMedicalDAO.instance.heartRate}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_respiratory_rate}:</ui:define>
								<h:inputText
									value="#{generalMedicalDAO.instance.respiratoryRate}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_blood1}:</ui:define>
								<h:inputText
									value="#{generalMedicalDAO.instance.bloodPressureSystole}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_blood2}:</ui:define>
								<h:inputText
									value="#{generalMedicalDAO.instance.bloodPressureDiastole}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" />
							</s:decorate>
						</h:panelGrid>
					</rich:simpleTogglePanel>
					<rich:simpleTogglePanel switchType="ajax" eventsQueue="q1" label="#{app.general_step2_tab3}" id="toggles23" opened="false">
						<h:panelGrid columns="1" style="padding-left:50px;font-size:14px ">					
							<s:decorate template="/layout/kEditSpace.xhtml" >
								<ui:define name="label">#{app.general_step2_reg_head}:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.regHead}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="font-size:14px;width:780px;"  />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_reg_neck}:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.regNeck}"
									disabled="#{wizardGeneralMedical.mode == 'r'}"  style="font-size:14px;width:780px;" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_reg_thorax}:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.regThorax}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="font-size:14px;width:780px;" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_reg_abdomen}:</ui:define>
								<h:inputTextarea
									value="#{generalMedicalDAO.instance.regAbdomen}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="font-size:14px;width:780px;" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_reg_tips}:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.regTips}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="font-size:14px;width:780px;" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">#{app.general_step2_reg_genitals}:</ui:define>
								<h:inputTextarea
									value="#{generalMedicalDAO.instance.regGenitals}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="font-size:14px;width:780px;" />
							</s:decorate>
						</h:panelGrid>
					</rich:simpleTogglePanel>
					<rich:simpleTogglePanel switchType="ajax" eventsQueue="q1" label="OIDO-NARIZ-GARGANTA-LARINGE" id="toggles24" opened="false">
						<h:panelGrid columns="1" style="padding-left:50px;font-size:14px;width:780px; ">					
							<s:decorate template="/layout/kEditSpace.xhtml"  >
								<ui:define name="label">Oidos:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.oidos}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="width:780px;font-size:14px" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">Nariz - Fosas nasales:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.narizFosasNasales}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="width:780px;font-size:14px"  />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml"  >
								<ui:define name="label">Boca - Faringe:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.bocaFaringe}"
									disabled="#{wizardGeneralMedical.mode == 'r'}"  style="width:780px;font-size:14px" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">Laringe:</ui:define>
								<h:inputTextarea
									value="#{generalMedicalDAO.instance.laringe}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="width:780px;font-size:14px" />
							</s:decorate>
							<s:decorate template="/layout/kEditSpace.xhtml">
								<ui:define name="label">Cabeza - Cuello:</ui:define>
								<h:inputTextarea value="#{generalMedicalDAO.instance.cabezaCuello}"
									disabled="#{wizardGeneralMedical.mode == 'r'}" style="width:780px;font-size:14px" />
							</s:decorate>
						</h:panelGrid>
					</rich:simpleTogglePanel>
		</rich:panel>
		
		<rich:modalPanel id="selMotiv" width="600" moveable="true" autosized="true"  top="40"
			onmaskclick="#{rich:component('selMotiv')}.hide();"
			onbeforeshow="activeModal.setActiveModalPanel('selMotiv');">
			<f:facet name="header">Motivos consulta</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
						onclick="#{rich:component('selMotiv')}.hide();" />
				</h:panelGroup>
			</f:facet>
			<h:form id="frmSelMotiv">
				<p:growl globalOnly="true" sticky="false" life="3000" />
				<p:focus />
				<a:queue name="q1" />
						
				<h:panelGrid columns="1" style="width:600px;margin:0 auto;" >
				
					<h:inputText value="#{motivoConsultaHome.busqueda}"   >
						<a:support event="onkeyup" action="#{motivoConsultaHome.buscarMotivosConsulta()}" reRender="_tableMotiv" ajaxSingle="true" ></a:support>
					</h:inputText>
									
					<rich:dataTable var="res" value="#{motivoConsultaHome.motivosConsulta}" id="_tableMotiv"
						rows="10" align="center"  rowClasses="tblEven,tblOdd" onRowMouseOver="this.style.backgroundColor='#A3CAF1'" onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'" 
						headerClass="tablaHeader" footerClass="tableScroll">
						<f:facet name="header">Motivos de consulta</f:facet>
						<rich:column >
							<f:facet name="header">Nombre</f:facet>
							<h:outputText value="#{res.descripcion}" />
						</rich:column>
										
						<rich:column>
							<f:facet name="header">#{msn.col_actions}</f:facet>
							<a:commandButton  styleClass="addBtn" value=" " reRender="txtMotivoConsulta,frmSelMotiv"
								action="#{generalMedicalDAO.agregarMotivoConsulta(res)}" ajaxSingle="true" eventsQueue="q1"	>
							</a:commandButton>
							<!-- <a:commandLink value="#{app.movimientomast_select_product}" reRender="ant"
								action="#{clienteHome.addAntecedente(res)}" ajaxSingle="true" eventsQueue="q1"							
								onclick="#{rich:component('selAnt')}.hide();">
							</a:commandLink> -->
							<!--  --> 
							<!--<h:selectBooleanCheckbox value="#{clienteHome.anteceDenteSl}">
								<a:support event="onchange" ajaxSingle="true" eventsQueue="q1"  reRender="ant" 
										action="#{clienteHome.addAntecedente(res)}" />
							</h:selectBooleanCheckbox>  -->
						</rich:column>
						<f:facet name="footer">
							<rich:datascroller id="ds1" renderIfSinglePage="true" />
						</f:facet>
					</rich:dataTable>
				</h:panelGrid>					
			</h:form>			
		</rich:modalPanel>
</ui:composition>